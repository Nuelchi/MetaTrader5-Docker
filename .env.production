# MT5 VPS Server Environment Configuration - PRODUCTION READY
# Generated for traintrading.trainflow.dev deployment

# ==========================================
# SUPABASE AUTHENTICATION
# ==========================================
SUPABASE_URL=https://kgfzbkwyepchbysaysky.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtnZnpia3d5ZXBjaGJ5c2F5c2t5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0Nzk5NDAsImV4cCI6MjA2ODA1NTk0MH0.WsMnjZsBPdM5okL4KZXZidX8eiTiGmN-Qc--Y359H6M
# Note: Using Supabase client auth (same as backend) - no SUPABASE_JWT_SECRET needed

# ==========================================
# MT5 SERVER CONFIGURATION
# ==========================================
MT5_PATH=/config/.wine/drive_c/Program Files/MetaTrader 5
MT5_SERVER_PORT=8001
MT5_ENCRYPTION_KEY=NEED_TO_GENERATE_32_BYTE_KEY

# ==========================================
# API SECURITY
# ==========================================
API_KEYS=mt5-api-key-prod-1,mt5-api-key-prod-2,mt5-api-key-prod-3
ALLOWED_IPS=127.0.0.1,::1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
JWT_SECRET=NEED_TO_GENERATE_STRONG_JWT_SECRET
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# RATE LIMITING
# ==========================================
REQUESTS_PER_MINUTE=60
BURST_LIMIT=10
WEBSOCKET_CONNECTIONS_MAX=100

# ==========================================
# WEBSOCKET CONFIGURATION
# ==========================================
WS_HOST=0.0.0.0
WS_PORT=8765
WS_PING_INTERVAL=30
WS_PING_TIMEOUT=10

# ==========================================
# REST API CONFIGURATION
# ==========================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_DEBUG=false

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# Note: MT5 server uses Supabase client (same as backend) - no direct DB connection needed
# DATABASE_URL not required - all operations use Supabase REST API

# ==========================================
# REDIS CONFIGURATION
# ==========================================
REDIS_URL=redis://default:1YfivkTaTGEPIx7W3pvayMWxxPzpG9yV@redis-10752.c73.us-east-1-2.ec2.redns.redis-cloud.com:10752
REDIS_CACHE_TTL=300

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/mt5-server.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# ==========================================
# MONITORING & METRICS
# ==========================================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# ==========================================
# MARKET DATA CONFIGURATION
# ==========================================
MARKET_DATA_CACHE_SIZE=1000
MARKET_DATA_UPDATE_INTERVAL=200
HISTORICAL_DATA_CACHE_TTL=3600

# ==========================================
# RISK MANAGEMENT
# ==========================================
MAX_POSITION_SIZE_PCT=0.1
MAX_DAILY_LOSS_PCT=0.05
MAX_CONCURRENT_TRADES=10
DEFAULT_STOP_LOSS_PIPS=50
DEFAULT_TAKE_PROFIT_PIPS=100

# ==========================================
# NOTIFICATION CONFIGURATION
# ==========================================
SMTP_SERVER=edubem80@gmail.com
SMTP_PORT=587
SMTP_USERNAME=NEED_SMTP_USERNAME
SMTP_PASSWORD=NEED_SMTP_APP_PASSWORD
NOTIFICATION_EMAIL=NEED_NOTIFICATION_EMAIL

# ==========================================
# BACKUP CONFIGURATION
# ==========================================
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/mt5-server

# ==========================================
# CONTAINER CONFIGURATION
# ==========================================
DOCKER_NETWORK=mt5-network
CONTAINER_RESTART_POLICY=always
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=1.0

# ==========================================
# SSL/TLS CONFIGURATION
# ==========================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/mt5-server.crt
SSL_KEY_PATH=/etc/ssl/private/mt5-server.key
SSL_CA_CERT_PATH=/etc/ssl/certs/ca.crt

# ==========================================
# DEVELOPMENT/DEBUG SETTINGS
# ==========================================
DEBUG_MODE=false
ENABLE_SWAGGER_DOCS=false
ENABLE_CORS=true
CORS_ORIGINS=https://trainflow.dev,https://www.trainflow.dev,https://localhost:3000,https://traintrading.trainflow.dev

# ==========================================
# MT5 TERMINAL SETTINGS
# ==========================================
MT5_AUTO_LOGIN=true
MT5_CONNECTION_TIMEOUT=30
MT5_RECONNECT_ATTEMPTS=5
MT5_RECONNECT_DELAY=10

# ==========================================
# PERFORMANCE TUNING
# ==========================================
MAX_WORKERS=4
THREAD_POOL_SIZE=10
ASYNCIO_MAX_WORKERS=20
MEMORY_CACHE_SIZE_MB=512

# ==========================================
# ALERTS & MONITORING
# ==========================================
ALERT_WEBHOOK_URL=
ALERT_ON_DISCONNECTION=true
ALERT_ON_HIGH_LATENCY=true
LATENCY_THRESHOLD_MS=1000

# ==========================================
# FEATURE FLAGS
# ==========================================
ENABLE_REAL_TIME_TRADING=true
ENABLE_PAPER_TRADING=true
ENABLE_STRATEGY_BACKTESTING=true
ENABLE_MARKET_DATA_STREAMING=true
ENABLE_ORDER_MANAGEMENT=true
ENABLE_POSITION_TRACKING=true
ENABLE_RISK_MANAGEMENT=true
ENABLE_PERFORMANCE_ANALYTICS=true

# ==========================================
# EXTERNAL INTEGRATIONS
# ==========================================
INFLUXDB_URL=
INFLUXDB_TOKEN=
INFLUXDB_ORG=
INFLUXDB_BUCKET=mt5-metrics

GRAFANA_URL=
GRAFANA_API_KEY=

PROMETHEUS_PUSHGATEWAY_URL=