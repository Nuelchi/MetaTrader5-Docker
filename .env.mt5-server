# MT5 VPS Server Environment Configuration
# Copy this file to .env on your VPS and fill in the values

# ==========================================
# SUPABASE AUTHENTICATION
# ==========================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_JWT_SECRET=JAy9Bi8qCw9xgtSJV9WsW9VIbcqTcWsQqUDXUSxj0Ifj39ccmXdCuIAN3jatAlkbGs/pndCWT7iInDT0DDnOiQ==

# ==========================================
# MT5 SERVER CONFIGURATION
# ==========================================
MT5_PATH=/config/.wine/drive_c/Program Files/MetaTrader 5
MT5_SERVER_PORT=8001
MT5_ENCRYPTION_KEY=your-32-byte-encryption-key-here

# ==========================================
# API SECURITY
# ==========================================
API_KEYS=your-api-key-1,your-api-key-2,your-api-key-3
ALLOWED_IPS=127.0.0.1,::1,your-trusted-ip-ranges
JWT_SECRET=your-jwt-secret-for-internal-use
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# RATE LIMITING
# ==========================================
REQUESTS_PER_MINUTE=60
BURST_LIMIT=10
WEBSOCKET_CONNECTIONS_MAX=100

# ==========================================
# WEBSOCKET CONFIGURATION
# ==========================================
WS_HOST=0.0.0.0
WS_PORT=8765
WS_PING_INTERVAL=30
WS_PING_TIMEOUT=10

# ==========================================
# REST API CONFIGURATION
# ==========================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_DEBUG=false

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
DATABASE_URL=postgresql://username:password@localhost:5432/mt5_server
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=3600

# ==========================================
# REDIS CONFIGURATION (Optional - for caching)
# ==========================================
REDIS_URL=redis://localhost:6379
REDIS_CACHE_TTL=300

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/mt5-server.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# ==========================================
# MONITORING & METRICS
# ==========================================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# ==========================================
# MARKET DATA CONFIGURATION
# ==========================================
MARKET_DATA_CACHE_SIZE=1000
MARKET_DATA_UPDATE_INTERVAL=200
HISTORICAL_DATA_CACHE_TTL=3600

# ==========================================
# RISK MANAGEMENT
# ==========================================
MAX_POSITION_SIZE_PCT=0.1
MAX_DAILY_LOSS_PCT=0.05
MAX_CONCURRENT_TRADES=10
DEFAULT_STOP_LOSS_PIPS=50
DEFAULT_TAKE_PROFIT_PIPS=100

# ==========================================
# NOTIFICATION CONFIGURATION
# ==========================================
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
NOTIFICATION_EMAIL=alerts@yourdomain.com

# ==========================================
# BACKUP CONFIGURATION
# ==========================================
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/mt5-server

# ==========================================
# CONTAINER CONFIGURATION
# ==========================================
DOCKER_NETWORK=mt5-network
CONTAINER_RESTART_POLICY=always
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=1.0

# ==========================================
# SSL/TLS CONFIGURATION (for production)
# ==========================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/mt5-server.crt
SSL_KEY_PATH=/etc/ssl/private/mt5-server.key
SSL_CA_CERT_PATH=/etc/ssl/certs/ca.crt

# ==========================================
# DEVELOPMENT/DEBUG SETTINGS
# ==========================================
DEBUG_MODE=false
ENABLE_SWAGGER_DOCS=false
ENABLE_CORS=true
CORS_ORIGINS=https://trainflow.dev,https://www.trainflow.dev,https://localhost:3000,https://traintrading.trainflow.dev

# ==========================================
# MT5 TERMINAL SETTINGS
# ==========================================
MT5_AUTO_LOGIN=true
MT5_CONNECTION_TIMEOUT=30
MT5_RECONNECT_ATTEMPTS=5
MT5_RECONNECT_DELAY=10

# ==========================================
# PERFORMANCE TUNING
# ==========================================
MAX_WORKERS=4
THREAD_POOL_SIZE=10
ASYNCIO_MAX_WORKERS=20
MEMORY_CACHE_SIZE_MB=512

# ==========================================
# ALERTS & MONITORING
# ==========================================
ALERT_WEBHOOK_URL=https://your-monitoring-service.com/webhook
ALERT_ON_DISCONNECTION=true
ALERT_ON_HIGH_LATENCY=true
LATENCY_THRESHOLD_MS=1000

# ==========================================
# FEATURE FLAGS
# ==========================================
ENABLE_REAL_TIME_TRADING=true
ENABLE_PAPER_TRADING=true
ENABLE_STRATEGY_BACKTESTING=true
ENABLE_MARKET_DATA_STREAMING=true
ENABLE_ORDER_MANAGEMENT=true
ENABLE_POSITION_TRACKING=true
ENABLE_RISK_MANAGEMENT=true
ENABLE_PERFORMANCE_ANALYTICS=true

# ==========================================
# EXTERNAL INTEGRATIONS
# ==========================================
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-influxdb-token
INFLUXDB_ORG=your-org
INFLUXDB_BUCKET=mt5-metrics

GRAFANA_URL=http://localhost:3001
GRAFANA_API_KEY=your-grafana-api-key

PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091